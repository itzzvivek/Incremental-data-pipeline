FROM eclipse-temurin:11-jdk

RUN apt-get update && apt-get install -y python3 python3-pip tar && rm -rf /var/lib/apt/lists/*

ENV SPARK_VERSION=3.5.0
ENV HADOOP_VERSION=3
ENV SPARK_HOME=/opt/spark

COPY spark-3.5.0-bin-hadoop3.tgz /tmp/spark.tgz

RUN tar -xzf /tmp/spark.tgz -C /opt \
    && mv /opt/spark-3.5.0-bin-hadoop3 /opt/spark \
    && rm /tmp/spark.tgz

ENV PATH="${SPARK_HOME}/bin:${PATH}"

COPY spark/jars /opt/spark/jars

CMD ["/bin/bash"]
